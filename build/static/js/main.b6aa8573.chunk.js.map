{"version":3,"sources":["services/tips.js","reducers/tipReducer.js","hooks/index.js","components/TextInput.js","components/Button.js","components/AddTip.js","components/Loading.js","components/NoTips.js","components/TipList.js","App.js","store.js","index.js"],"names":["getAll","a","axios","get","response","create","newObject","post","remove","id","delete","formatTip","tip","createdAt","Date","initialState","tipdata","processing","error","tipReducer","state","action","type","concat","data","window","alert","filter","useField","useState","value","setValue","onChange","event","target","reset","TextInput","label","inputValue","className","data-cy","removeReset","Button","buttonText","priority","cyDataAttribute","onClick","connectedAddTip","connect","addTip","dispatch","tipService","result","props","title","url","tags","onSubmit","e","preventDefault","trim","split","map","tag","length","Loading","NoTips","connectedTipList","tips","removeTip","status","console","log","deleteTip","confirm","sort","b","key","toLocaleString","href","index","connectedApp","initTips","formattedTips","useEffect","path","render","reducer","combineReducers","store","createStore","applyMiddleware","thunk","subscribe","getState","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b6aa8573.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/tips'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response\n}\n\nconst remove = async id => {\n  const response = await axios.delete(`${baseUrl}/${id}`)\n  return response\n}\n\nexport default { getAll, create, remove }\n","import tipService from '../services/tips'\n\nconst formatTip = (tip) => ({ ...tip, createdAt: new Date(tip.createdAt) })\n\nexport const initTips = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: 'INIT_TIPS',\n    })\n\n    const result = await tipService.getAll()\n\n    if (result.status === 200) {\n      const formattedTips = result.data.map(formatTip)\n\n      dispatch({\n        type: 'ACTION_SUCCESS',\n        data: formattedTips,\n      })\n    } else {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: result,\n      })\n    }\n  }\n}\n\nexport const addTip = (tip) => {\n  return async (dispatch) => {\n    dispatch({\n      type: 'ADD_TIP',\n    })\n\n    try {\n      const result = await tipService.create(tip)\n\n      dispatch({\n        type: 'ACTION_SUCCESS',\n        data: formatTip(result.data),\n      })\n    } catch (error) {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: error.response.data.error,\n      })\n    }\n  }\n}\n\nexport const removeTip = (id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: 'REMOVE_TIP',\n    })\n\n    let result\n    try {\n      result = await tipService.remove(id)\n    } catch (error) {\n      result = error\n    }\n\n    if (result.status === 204) {\n      dispatch({\n        type: 'REMOVE_SUCCESS',\n        data: id,\n      })\n    } else {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: result,\n      })\n    }\n  }\n}\n\nconst initialState = {\n  tipdata: [],\n  processing: true,\n  error: null,\n}\n\nconst tipReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'INIT_TIPS':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'ADD_TIP':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'ACTION_SUCCESS':\n      return {\n        ...state,\n        tipdata: state.tipdata.concat(action.data),\n        processing: false,\n        error: null,\n      }\n    case 'ACTION_FAIL':\n      window.alert(`Toiminto epäonnistui (${action.data})`)\n      return {\n        ...state,\n        error: action.data,\n        processing: false,\n      }\n    case 'REMOVE_TIP':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'REMOVE_SUCCESS':\n      return {\n        ...state,\n        tipdata: state.tipdata.filter((tip) => tip.id !== action.data),\n        processing: false,\n        error: null,\n      }\n    default:\n      return state\n  }\n}\n\nexport default tipReducer\n","import { useState } from 'react'\n\nexport const useField = (type) => {\n  const [value, setValue] = useState('')\n\n  const onChange = (event) => {\n    setValue(event.target.value)\n  }\n\n  const reset = () => {\n    setValue('')\n  }\n\n  return {\n    type,\n    value,\n    onChange,\n    reset,\n  }\n}\n","import React from 'react'\n\nconst TextInput = ({ label, inputValue }) => {\n\n  // eslint-disable-next-line\n  const removeReset = ({ reset: _, ...clone }) => clone\n\n  return (\n    <div className='form__field form__field--text'>\n      <label>{label}</label>\n      <input\n        data-cy=\"tip-url\"\n        id=\"tip_url\"\n        {...removeReset(inputValue)}\n      />\n    </div>\n  )\n}\n\nexport default TextInput\n","import React from 'react'\n\nconst Button = ({ buttonText, priority, type, cyDataAttribute, onClick }) => (\n  <div className=\"button__container\">\n    <button\n      className={`button button-${priority} button-${type}`}\n      data-cy={cyDataAttribute}\n      type={type}\n      onClick={onClick}\n    >\n      {buttonText}\n    </button>\n  </div>\n)\n\nexport default Button\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { addTip } from '../reducers/tipReducer'\nimport { useField } from '../hooks/index'\nimport TextInput from './TextInput'\nimport Button from './Button'\n\nconst AddTip =  (props) => {\n  const title = useField('text')\n  const url = useField('text')\n  const tags = useField('text')\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    props.addTip({\n      title: title.value.trim(),\n      url: url.value.trim(),\n      tags: tags.value.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0)\n    })\n    title.reset()\n    url.reset()\n    tags.reset()\n  }\n\n  return (\n    <div className=\"form form--add-tip\">\n      <h3>Lisää vinkki</h3>\n      <form onSubmit={handleSubmit}>\n        <TextInput label='Otsikko' inputValue={title} />\n        <TextInput label='Linkki' inputValue={url} />\n        <TextInput label='Tagit' inputValue={tags} />\n        <Button buttonText='Lisää' priority='primary' type='submit' cyDataAttribute='add-tip' />\n      </form>\n    </div>\n  )\n}\n\nconst mapStateToProps = () => {\n  return {\n  }\n}\n\nconst connectedAddTip = connect(mapStateToProps, {\n  addTip,\n})(AddTip)\n\nexport default connectedAddTip\n","import React from 'react'\n\nconst Loading = () => <div>Lataillaan...</div>\n\nexport default Loading\n","import React from 'react'\n// import { Link } from 'react-router-dom';\n\nconst NoTips = () => (\n  <div>\n    <p>Et ole lisännyt vinkkejä vielä</p>\n  </div>\n)\n\nexport default NoTips\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { removeTip } from '../reducers/tipReducer'\nimport Loading from './Loading'\nimport NoTips from './NoTips'\nimport Button from './Button'\n\nconst TipList = (props) => {\n  const { processing, tipdata } = props.tips\n\n  if (processing && tipdata.length === 0) {\n    return <Loading />\n  }\n\n  if (tipdata.length === 0) {\n    return <NoTips />\n  }\n\n  console.log('TipList: tipdata', tipdata)\n\n  const byDescendingTime = (b, a) => a.createdAt - b.createdAt\n\n  const deleteTip = async (tip) => {\n    const ok = window.confirm(`Poistetaanko lukuvinkki '${tip.title}'?`)\n    if (ok)\n      props.removeTip(tip.id)\n  }\n\n  return (\n    <div>\n      <h2>Lukuvinkit</h2>\n      {tipdata.sort(byDescendingTime).map((tip) => {\n        return (\n          <div data-cy=\"tip-item\" key={tip.id} className=\"tip-list-item\">\n            <div className=\"tip-content\">\n              <div className=\"timestamp\">{tip.createdAt.toLocaleString('fi-FI')}</div>\n              <h3>{tip.title}</h3>\n              <a href={tip.url}>{tip.url}</a>\n              <div className=\"tip-item__meta tip-item__meta--tags\">\n                {tip.tags.map((tag, index) => { return (\n                  <span key={`${index}-${tag}-${tip.id}`} className=\"tag_item\">\n                    <span>{tag}</span>\n                    {(index !== tip.tags.length - 1) && <span className=\"sep\">,</span>}\n                  </span>\n                )})}\n              </div>\n              <Button\n                onClick={() => deleteTip(tip)}\n                buttonText='Poista'\n                priority='secondary'\n                type='button'\n                cyDataAttribute='remove-tip'\n              />\n            </div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    tips: state.tips,\n  }\n}\n\nconst connectedTipList = connect(mapStateToProps, {\n  removeTip,\n})(TipList)\nexport default connectedTipList\n","import React, { useEffect } from 'react'\nimport { Route /*, Switch */ } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport { initTips } from './reducers/tipReducer'\n\nimport AddTip from './components/AddTip'\nimport TipList from './components/TipList'\n\nconst App = (props) => {\n  useEffect(() => {\n    if (props.tips.processing) {\n      props.initTips()\n    }\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"heading heading__h1\">Lukuvinkkikirjasto</h1>\n      <div className=\"content-container\">\n        <Route\n          path=\"/\"\n          render={() => (\n            <>\n              <AddTip />\n              <TipList />\n            </>\n          )}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    tips: state.tips,\n  }\n}\n\nconst connectedApp = connect(mapStateToProps, {\n  initTips,\n})(App)\nexport default connectedApp\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport tipReducer from './reducers/tipReducer'\n\nconst reducer = combineReducers({\n  tips: tipReducer\n})\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nstore.subscribe(() => console.log(store.getState()))\n\nexport default store\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\nimport store from './store'\nimport './styles.css'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('app')\n  )\n}\n\nrender()\nstore.subscribe(render)\n"],"sourceRoot":""}