(this["webpackJsonplukuvinkkikirjasto-front"]=this["webpackJsonplukuvinkkikirjasto-front"]||[]).push([[0],{38:function(t,e,n){t.exports=n(66)},66:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(15),c=n.n(i),u=n(18),l=n(8),s=n(9),o=n(14),p=n(6),f=n.n(p),d=n(12),m=n(20),v=n.n(m),b={getAll:function(){var t=Object(d.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("/api/tips");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),create:function(){var t=Object(d.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.post("/api/tips",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E={tipdata:[],processing:!0,error:null},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT_TIPS":case"ADD_TIP":return Object(o.a)({},t,{processing:!0});case"ACTION_SUCCESS":var n=t.tipdata.concat(e.data);return Object(o.a)({},t,{tipdata:n.sort((function(t,e){return e.id-t.id})),processing:!1,error:null});case"ACTION_FAIL":return Object(o.a)({},t,{error:e.data,processing:!1});default:return t}},O=n(37),h=n(36),g=function(t){var e=Object(a.useState)(""),n=Object(h.a)(e,2),r=n[0],i=n[1];return{type:t,value:r,onChange:function(t){i(t.target.value)},reset:function(){i("")}}},j=Object(l.b)((function(){return{}}),{addTip:function(t,e){return function(){var n=Object(d.a)(f.a.mark((function n(a){var r;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),a({type:"ADD_TIP"}),n.next=4,b.create(e);case 4:201===(r=n.sent).status?a({type:"ACTION_SUCCESS",data:r.data}):a({type:"ACTION_FAIL",data:r});case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}})((function(t){var e=g("text"),n=g("text"),a=function(t){t.reset;return Object(O.a)(t,["reset"])};return r.a.createElement("div",{className:"form form--add-tip"},r.a.createElement("h3",null,"Lis\xe4\xe4 vinkki"),r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t.addTip(a,{title:e.value,url:n.value}),e.reset(),n.reset()}},r.a.createElement("div",null,r.a.createElement("label",null,"Otsikko"),r.a.createElement("input",Object.assign({"data-cy":"tip-title",id:"tip_title"},a(e)))),r.a.createElement("div",null,r.a.createElement("label",null,"Linkki"),r.a.createElement("input",Object.assign({"data-cy":"tip-url",id:"tip_url"},a(n)))),r.a.createElement("button",{className:"button button-primary button-submit","data-cy":"add-tip",type:"submit"},"Lis\xe4\xe4")))})),y=function(){return r.a.createElement("div",null,"Lataillaan...")},I=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Et ole lis\xe4nnyt vinkkej\xe4 viel\xe4"))},T=Object(l.b)((function(t){return{tips:t.tips}}))((function(t){var e=t.tips,n=e.processing,a=e.tipdata;return n?r.a.createElement(y,null):0===a.length?r.a.createElement(I,null):(console.log("TipList: tipdata",a),r.a.createElement("div",null,r.a.createElement("h2",null,"Lukuvinkit"),a.map((function(t){return r.a.createElement("div",{"data-cy":"tip-item",key:t.id,className:"tip-list-item"},r.a.createElement("div",{className:"tip-content"},t.title," - ",r.a.createElement("a",{href:t.url},t.url)))}))))})),N=Object(l.b)((function(t){return{tips:t.tips}}),{initTips:function(){return function(){var t=Object(d.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:"INIT_TIPS"}),t.next=3,b.getAll();case 3:200===(n=t.sent).status?e({type:"ACTION_SUCCESS",data:n.data}):e({type:"ACTION_FAIL",data:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(t){return Object(a.useEffect)((function(){t.tips.processing&&t.initTips()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("h1",{className:"heading heading__h1"},"Lukuvinkkikirjasto"),r.a.createElement("div",{className:"content-container"},r.a.createElement(s.a,{path:"/",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement(T,null))}})))})),A=n(11),S=n(35),_=Object(A.c)({tips:k}),C=Object(A.d)(_,Object(A.a)(S.a));C.subscribe((function(){return console.log(C.getState())}));var w=C,x=function(){c.a.render(r.a.createElement(l.a,{store:w},r.a.createElement(u.a,null,r.a.createElement(N,null))),document.getElementById("app"))};x(),w.subscribe(x)}},[[38,1,2]]]);
//# sourceMappingURL=main.107962db.chunk.js.map