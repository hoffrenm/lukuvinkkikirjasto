{"version":3,"sources":["services/tips.js","reducers/tipReducer.js","hooks/index.js","components/TextInput.js","components/Button.js","components/AddTip.js","components/Loading.js","components/NoTips.js","components/TipList.js","App.js","store.js","index.js"],"names":["getAll","a","axios","get","response","create","newObject","post","remove","id","delete","formatTip","tip","createdAt","Date","initialState","tipdata","processing","error","tipReducer","state","action","type","concat","data","window","alert","filter","useField","useState","value","setValue","onChange","event","target","reset","TextInput","label","inputValue","className","data-cy","removeReset","Button","buttonText","priority","cyDataAttribute","onClick","connectedAddTip","connect","addTip","e","dispatch","preventDefault","tipService","result","status","formattedTip","props","title","url","tags","onSubmit","split","map","tag","trim","length","Loading","NoTips","connectedTipList","tips","removeTip","console","log","deleteTip","confirm","sort","b","key","toLocaleString","href","index","connectedApp","initTips","formattedTips","useEffect","path","render","reducer","combineReducers","store","createStore","applyMiddleware","thunk","subscribe","getState","ReactDOM","document","getElementById"],"mappings":"uTAkBe,GAAEA,OAfL,uCAAG,4BAAAC,EAAA,sEACUC,IAAMC,IAHf,aAED,cACPC,EADO,yBAENA,GAFM,2CAAH,qDAeaC,OAVb,uCAAG,WAAMC,GAAN,eAAAL,EAAA,sEACUC,IAAMK,KARf,YAQ6BD,GAD9B,cACPF,EADO,yBAENA,GAFM,2CAAH,sDAUqBI,OALrB,uCAAG,WAAMC,GAAN,eAAAR,EAAA,sEACUC,IAAMQ,OAAN,UAbT,YAaS,YAA2BD,IADrC,cACPL,EADO,yBAENA,GAFM,2CAAH,uDCXNO,EAAY,SAACC,GAAD,sBAAeA,EAAf,CAAoBC,UAAW,IAAIC,KAAKF,EAAIC,cA+ExDE,EAAe,CACnBC,QAAS,GACTC,YAAY,EACZC,MAAO,MA8CMC,EA3CI,WAAmC,IAAlCC,EAAiC,uDAAzBL,EAAcM,EAAW,uCACnD,OAAQA,EAAOC,MACb,IAAK,YAKL,IAAK,UACH,OAAO,eACFF,EADL,CAEEH,YAAY,IAEhB,IAAK,iBACH,OAAO,eACFG,EADL,CAEEJ,QAASI,EAAMJ,QAAQO,OAAOF,EAAOG,MACrCP,YAAY,EACZC,MAAO,OAEX,IAAK,cAEH,OADAO,OAAOC,MAAP,mCAAsCL,EAAOG,KAA7C,MACO,eACFJ,EADL,CAEEF,MAAOG,EAAOG,KACdP,YAAY,IAEhB,IAAK,aACH,OAAO,eACFG,EADL,CAEEH,YAAY,IAEhB,IAAK,iBACH,OAAO,eACFG,EADL,CAEEJ,QAASI,EAAMJ,QAAQW,QAAO,SAACf,GAAD,OAASA,EAAIH,KAAOY,EAAOG,QACzDP,YAAY,EACZC,MAAO,OAEX,QACE,OAAOE,I,QC5HAQ,EAAW,SAACN,GAAU,IAAD,EACNO,mBAAS,IADH,mBACzBC,EADyB,KAClBC,EADkB,KAWhC,MAAO,CACLT,OACAQ,QACAE,SAXe,SAACC,GAChBF,EAASE,EAAMC,OAAOJ,QAWtBK,MARY,WACZJ,EAAS,O,QCSEK,EAjBG,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,WAK1B,OACE,yBAAKC,UAAU,iCACb,+BAAQF,GACR,yCACEG,UAAQ,UACR/B,GAAG,WAPW,SAAC,GAAD,EAAG0B,MAAH,gCAQVM,CAAYH,OCETI,EAbA,SAAC,GAAD,IAAGC,EAAH,EAAGA,WAAYC,EAAf,EAAeA,SAAUtB,EAAzB,EAAyBA,KAAMuB,EAA/B,EAA+BA,gBAAiBC,EAAhD,EAAgDA,QAAhD,OACb,yBAAKP,UAAU,qBACb,4BACEA,UAAS,wBAAmBK,EAAnB,mBAAsCtB,GAC/CkB,UAASK,EACTvB,KAAMA,EACNwB,QAASA,GAERH,KCoCQI,EAJSC,aALA,WACtB,MAAO,KAIwC,CAC/CC,OJfoB,SAACC,EAAGtC,GACxB,8CAAO,WAAOuC,GAAP,iBAAAlD,EAAA,6DACLiD,EAAEE,iBAEFD,EAAS,CACP7B,KAAM,YAJH,SAOgB+B,EAAWhD,OAAOO,GAPlC,OASiB,OAFhB0C,EAPD,QASMC,QACHC,EAAe7C,EAAU2C,EAAO9B,MAEtC2B,EAAS,CACP7B,KAAM,iBACNE,KAAMgC,KAGRL,EAAS,CACP7B,KAAM,cACNE,KAAM8B,IAnBL,2CAAP,wDIasBN,EAnCR,SAACS,GACf,IAAMC,EAAQ9B,EAAS,QACjB+B,EAAM/B,EAAS,QACfgC,EAAOhC,EAAS,QActB,OACE,yBAAKW,UAAU,sBACb,kDACA,0BAAMsB,SAfW,SAACX,GACpBA,EAAEE,iBACFK,EAAMR,OAAOC,EAAG,CACdQ,MAAOA,EAAM5B,MACb6B,IAAKA,EAAI7B,MACT8B,KAAMA,EAAK9B,MAAMgC,MAAM,KAAKC,KAAI,SAAAC,GAAG,OAAIA,EAAIC,UAAQtC,QAAO,SAAAqC,GAAG,OAAIA,EAAIE,OAAS,OAEhFR,EAAMvB,QACNwB,EAAIxB,QACJyB,EAAKzB,UAOD,kBAAC,EAAD,CAAWE,MAAM,UAAUC,WAAYoB,IACvC,kBAAC,EAAD,CAAWrB,MAAM,SAASC,WAAYqB,IACtC,kBAAC,EAAD,CAAWtB,MAAM,QAAQC,WAAYsB,IACrC,kBAAC,EAAD,CAAQjB,WAAW,cAAQC,SAAS,UAAUtB,KAAK,SAASuB,gBAAgB,iBC3BrEsB,EAFC,kBAAM,+CCOPC,EANA,kBACb,6BACE,wECiEWC,EAHUrB,aAND,SAAC5B,GACvB,MAAO,CACLkD,KAAMlD,EAAMkD,QAIkC,CAChDC,UPduB,SAAC9D,GACxB,8CAAO,WAAO0C,GAAP,eAAAlD,EAAA,6DACLkD,EAAS,CACP7B,KAAM,eAFH,kBAOY+B,EAAW7C,OAAOC,GAP9B,OAOH6C,EAPG,uDASHA,EAAM,KATH,QAYiB,MAAlBA,EAAOC,OACTJ,EAAS,CACP7B,KAAM,iBACNE,KAAMf,IAGR0C,EAAS,CACP7B,KAAM,cACNE,KAAM8B,IApBL,yDAAP,wDOYuBN,EA5DT,SAACS,GAAW,IAAD,EACOA,EAAMa,KAA9BrD,EADiB,EACjBA,WAAYD,EADK,EACLA,QAEpB,GAAIC,GAAiC,IAAnBD,EAAQkD,OACxB,OAAO,kBAAC,EAAD,MAGT,GAAuB,IAAnBlD,EAAQkD,OACV,OAAO,kBAAC,EAAD,MAGTM,QAAQC,IAAI,mBAAoBzD,GAEhC,IAEM0D,EAAS,uCAAG,WAAO9D,GAAP,SAAAX,EAAA,sDACLwB,OAAOkD,QAAP,mCAA2C/D,EAAI8C,MAA/C,QAETD,EAAMc,UAAU3D,EAAIH,IAHN,2CAAH,sDAMf,OACE,6BACE,0CACCO,EAAQ4D,MAXY,SAACC,EAAG5E,GAAJ,OAAUA,EAAEY,UAAYgE,EAAEhE,aAWfkD,KAAI,SAACnD,GACnC,OACE,yBAAK4B,UAAQ,WAAWsC,IAAKlE,EAAIH,GAAI8B,UAAU,iBAC7C,yBAAKA,UAAU,eACb,yBAAKA,UAAU,aAAa3B,EAAIC,UAAUkE,eAAe,UACzD,4BAAKnE,EAAI8C,OACT,uBAAGsB,KAAMpE,EAAI+C,KAAM/C,EAAI+C,KACvB,yBAAKpB,UAAU,uCACZ3B,EAAIgD,KAAKG,KAAI,SAACC,EAAKiB,GAAY,OAC9B,0BAAMH,IAAG,UAAKG,EAAL,YAAcjB,EAAd,YAAqBpD,EAAIH,IAAM8B,UAAU,YAChD,8BAAOyB,GACLiB,IAAUrE,EAAIgD,KAAKM,OAAS,GAAM,0BAAM3B,UAAU,OAAhB,UAI1C,kBAAC,EAAD,CACEO,QAAS,kBAAM4B,EAAU9D,IACzB+B,WAAW,SACXC,SAAS,YACTtB,KAAK,SACLuB,gBAAgB,wBCPjBqC,EAHMlC,aANG,SAAC5B,GACvB,MAAO,CACLkD,KAAMlD,EAAMkD,QAI8B,CAC5Ca,SRtCsB,WACtB,8CAAO,WAAOhC,GAAP,iBAAAlD,EAAA,6DACLkD,EAAS,CACP7B,KAAM,cAFH,SAKgB+B,EAAWrD,SAL3B,OAOiB,OAFhBsD,EALD,QAOMC,QACH6B,EAAgB9B,EAAO9B,KAAKuC,IAAIpD,GAEtCwC,EAAS,CACP7B,KAAM,iBACNE,KAAM4D,KAGRjC,EAAS,CACP7B,KAAM,cACNE,KAAM8B,IAjBL,2CAAP,wDQoCmBN,EAhCT,SAACS,GAQX,OAPA4B,qBAAU,WACJ5B,EAAMa,KAAKrD,YACbwC,EAAM0B,aAGP,IAGD,yBAAK5C,UAAU,OACb,wBAAIA,UAAU,uBAAd,sBACA,yBAAKA,UAAU,qBACb,kBAAC,IAAD,CACE+C,KAAK,IACLC,OAAQ,kBACN,oCACE,kBAAC,EAAD,MACA,kBAAC,EAAD,e,gBCrBRC,EAAUC,YAAgB,CAC9BnB,KAAMnD,IAGFuE,EAAQC,YAAYH,EAASI,YAAgBC,MAEnDH,EAAMI,WAAU,kBAAMtB,QAAQC,IAAIiB,EAAMK,eAEzBL,QCLTH,G,MAAS,WACbS,IAAST,OACP,kBAAC,IAAD,CAAUG,MAAOA,GACf,kBAAC,IAAD,KACE,kBAAC,EAAD,QAGJO,SAASC,eAAe,UAI5BX,IACAG,EAAMI,UAAUP,K","file":"static/js/main.8c647a88.chunk.js","sourcesContent":["import axios from 'axios'\nconst baseUrl = '/api/tips'\n\nconst getAll = async () => {\n  const response = await axios.get(baseUrl)\n  return response\n}\n\nconst create = async newObject => {\n  const response = await axios.post(baseUrl, newObject)\n  return response\n}\n\nconst remove = async id => {\n  const response = await axios.delete(`${baseUrl}/${id}`)\n  return response\n}\n\nexport default { getAll, create, remove }\n","import tipService from '../services/tips'\n\nconst formatTip = (tip) => ({ ...tip, createdAt: new Date(tip.createdAt) })\n\nexport const initTips = () => {\n  return async (dispatch) => {\n    dispatch({\n      type: 'INIT_TIPS',\n    })\n\n    const result = await tipService.getAll()\n\n    if (result.status === 200) {\n      const formattedTips = result.data.map(formatTip)\n\n      dispatch({\n        type: 'ACTION_SUCCESS',\n        data: formattedTips,\n      })\n    } else {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: result,\n      })\n    }\n  }\n}\n\nexport const addTip = (e, tip) => {\n  return async (dispatch) => {\n    e.preventDefault()\n\n    dispatch({\n      type: 'ADD_TIP',\n    })\n\n    const result = await tipService.create(tip)\n\n    if (result.status === 201) {\n      const formattedTip = formatTip(result.data)\n\n      dispatch({\n        type: 'ACTION_SUCCESS',\n        data: formattedTip,\n      })\n    } else {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: result,\n      })\n    }\n  }\n}\n\nexport const removeTip = (id) => {\n  return async (dispatch) => {\n    dispatch({\n      type: 'REMOVE_TIP',\n    })\n\n    let result\n    try {\n      result = await tipService.remove(id)\n    } catch (error) {\n      result = error\n    }\n\n    if (result.status === 204) {\n      dispatch({\n        type: 'REMOVE_SUCCESS',\n        data: id,\n      })\n    } else {\n      dispatch({\n        type: 'ACTION_FAIL',\n        data: result,\n      })\n    }\n  }\n}\n\nconst initialState = {\n  tipdata: [],\n  processing: true,\n  error: null,\n}\n\nconst tipReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case 'INIT_TIPS':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'ADD_TIP':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'ACTION_SUCCESS':\n      return {\n        ...state,\n        tipdata: state.tipdata.concat(action.data),\n        processing: false,\n        error: null,\n      }\n    case 'ACTION_FAIL':\n      window.alert(`Toiminto epäonnistui (${action.data})`)\n      return {\n        ...state,\n        error: action.data,\n        processing: false,\n      }\n    case 'REMOVE_TIP':\n      return {\n        ...state,\n        processing: true,\n      }\n    case 'REMOVE_SUCCESS':\n      return {\n        ...state,\n        tipdata: state.tipdata.filter((tip) => tip.id !== action.data),\n        processing: false,\n        error: null,\n      }\n    default:\n      return state\n  }\n}\n\nexport default tipReducer\n","import { useState } from 'react'\n\nexport const useField = (type) => {\n  const [value, setValue] = useState('')\n\n  const onChange = (event) => {\n    setValue(event.target.value)\n  }\n\n  const reset = () => {\n    setValue('')\n  }\n\n  return {\n    type,\n    value,\n    onChange,\n    reset,\n  }\n}\n","import React from 'react'\n\nconst TextInput = ({ label, inputValue }) => {\n\n  // eslint-disable-next-line\n  const removeReset = ({ reset: _, ...clone }) => clone\n\n  return (\n    <div className='form__field form__field--text'>\n      <label>{label}</label>\n      <input\n        data-cy=\"tip-url\"\n        id=\"tip_url\"\n        {...removeReset(inputValue)}\n      />\n    </div>\n  )\n}\n\nexport default TextInput\n","import React from 'react'\n\nconst Button = ({ buttonText, priority, type, cyDataAttribute, onClick }) => (\n  <div className=\"button__container\">\n    <button\n      className={`button button-${priority} button-${type}`}\n      data-cy={cyDataAttribute}\n      type={type}\n      onClick={onClick}\n    >\n      {buttonText}\n    </button>\n  </div>\n)\n\nexport default Button\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { addTip } from '../reducers/tipReducer'\nimport { useField } from '../hooks/index'\nimport TextInput from './TextInput'\nimport Button from './Button'\n\nconst AddTip =  (props) => {\n  const title = useField('text')\n  const url = useField('text')\n  const tags = useField('text')\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    props.addTip(e, {\n      title: title.value,\n      url: url.value,\n      tags: tags.value.split(',').map(tag => tag.trim()).filter(tag => tag.length > 0)\n    })\n    title.reset()\n    url.reset()\n    tags.reset()\n  }\n\n  return (\n    <div className=\"form form--add-tip\">\n      <h3>Lisää vinkki</h3>\n      <form onSubmit={handleSubmit}>\n        <TextInput label='Otsikko' inputValue={title} />\n        <TextInput label='Linkki' inputValue={url} />\n        <TextInput label='Tagit' inputValue={tags} />\n        <Button buttonText='Lisää' priority='primary' type='submit' cyDataAttribute='add-tip' />\n      </form>\n    </div>\n  )\n}\n\nconst mapStateToProps = () => {\n  return {\n  }\n}\n\nconst connectedAddTip = connect(mapStateToProps, {\n  addTip,\n})(AddTip)\n\nexport default connectedAddTip\n","import React from 'react'\n\nconst Loading = () => <div>Lataillaan...</div>\n\nexport default Loading\n","import React from 'react'\n// import { Link } from 'react-router-dom';\n\nconst NoTips = () => (\n  <div>\n    <p>Et ole lisännyt vinkkejä vielä</p>\n  </div>\n)\n\nexport default NoTips\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { removeTip } from '../reducers/tipReducer'\nimport Loading from './Loading'\nimport NoTips from './NoTips'\nimport Button from './Button'\n\nconst TipList = (props) => {\n  const { processing, tipdata } = props.tips\n\n  if (processing && tipdata.length === 0) {\n    return <Loading />\n  }\n\n  if (tipdata.length === 0) {\n    return <NoTips />\n  }\n\n  console.log('TipList: tipdata', tipdata)\n\n  const byDescendingTime = (b, a) => a.createdAt - b.createdAt\n\n  const deleteTip = async (tip) => {\n    const ok = window.confirm(`Poistetaanko lukuvinkki '${tip.title}'?`)\n    if (ok)\n      props.removeTip(tip.id)\n  }\n\n  return (\n    <div>\n      <h2>Lukuvinkit</h2>\n      {tipdata.sort(byDescendingTime).map((tip) => {\n        return (\n          <div data-cy=\"tip-item\" key={tip.id} className=\"tip-list-item\">\n            <div className=\"tip-content\">\n              <div className=\"timestamp\">{tip.createdAt.toLocaleString('fi-FI')}</div>\n              <h3>{tip.title}</h3>\n              <a href={tip.url}>{tip.url}</a>\n              <div className=\"tip-item__meta tip-item__meta--tags\">\n                {tip.tags.map((tag, index) => { return (\n                  <span key={`${index}-${tag}-${tip.id}`} className=\"tag_item\">\n                    <span>{tag}</span>\n                    {(index !== tip.tags.length - 1) && <span className=\"sep\">,</span>}\n                  </span>\n                )})}\n              </div>\n              <Button\n                onClick={() => deleteTip(tip)}\n                buttonText='Poista'\n                priority='secondary'\n                type='button'\n                cyDataAttribute='remove-tip'\n              />\n            </div>\n          </div>\n        )\n      })}\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    tips: state.tips,\n  }\n}\n\nconst connectedTipList = connect(mapStateToProps, {\n  removeTip,\n})(TipList)\nexport default connectedTipList\n","import React, { useEffect } from 'react'\nimport { Route /*, Switch */ } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport { initTips } from './reducers/tipReducer'\n\nimport AddTip from './components/AddTip'\nimport TipList from './components/TipList'\n\nconst App = (props) => {\n  useEffect(() => {\n    if (props.tips.processing) {\n      props.initTips()\n    }\n    // eslint-disable-next-line\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h1 className=\"heading heading__h1\">Lukuvinkkikirjasto</h1>\n      <div className=\"content-container\">\n        <Route\n          path=\"/\"\n          render={() => (\n            <>\n              <AddTip />\n              <TipList />\n            </>\n          )}\n        />\n      </div>\n    </div>\n  )\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    tips: state.tips,\n  }\n}\n\nconst connectedApp = connect(mapStateToProps, {\n  initTips,\n})(App)\nexport default connectedApp\n","import { createStore, applyMiddleware, combineReducers } from 'redux'\nimport thunk from 'redux-thunk'\n\nimport tipReducer from './reducers/tipReducer'\n\nconst reducer = combineReducers({\n  tips: tipReducer\n})\n\nconst store = createStore(reducer, applyMiddleware(thunk))\n\nstore.subscribe(() => console.log(store.getState()))\n\nexport default store\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport App from './App'\nimport store from './store'\nimport './styles.css'\n\nconst render = () => {\n  ReactDOM.render(\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>,\n    document.getElementById('app')\n  )\n}\n\nrender()\nstore.subscribe(render)\n"],"sourceRoot":""}