(this["webpackJsonplukuvinkkikirjasto-front"]=this["webpackJsonplukuvinkkikirjasto-front"]||[]).push([[0],{42:function(t,e,n){t.exports=n(70)},70:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(17),c=n.n(i),u=n(8),s=n(36),l=n(9),p=n(12),o=n(39),d=n(16),m=n(6),f=n.n(m),b=n(13),v=n(22),E=n.n(v),O={getAll:function(){var t=Object(b.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.get("/api/tips");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),create:function(){var t=Object(b.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.post("/api/tips",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j={tipdata:[],processing:!0,error:null},k=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"INIT_TIPS":return Object(d.a)({},e,{processing:!0,tipdata:n.data});case"ADD_TIP":return Object(d.a)({},e,{tipdata:[].concat(Object(o.a)(e.tipdata),[n.data]),processing:!0,newTitle:"",newUrl:""});case"ACTION_SUCCESS":return Object(d.a)({},e,(t={},Object(p.a)(t,n.name,!1),Object(p.a)(t,"processing",!1),Object(p.a)(t,"error",null),t));case"ACTION_FAIL":return Object(d.a)({},e,{error:n.name,processing:!1});default:return e}},h=n(41),g=n(40),y=function(t){var e=Object(a.useState)(""),n=Object(g.a)(e,2),r=n[0],i=n[1];return{type:t,value:r,onChange:function(t){i(t.target.value)},reset:function(){i("")}}},w=Object(u.b)((function(t){return{newTitle:t.tips.newTitle,newUrl:t.tips.newUrl}}),{addTip:function(t,e){return function(){var n=Object(b.a)(f.a.mark((function n(a){var r,i;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,O.create(e);case 3:r=n.sent,a({type:"ADD_TIP",data:i=r,name:"add"}),a(r?{type:"ACTION_SUCCESS",name:"add",data:i}:{type:"ACTION_FAIL",data:e,name:"add"});case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}})((function(t){var e=y("text"),n=y("text"),a=function(t){t.reset;return Object(h.a)(t,["reset"])};return r.a.createElement("div",{className:"form form--add-tip"},r.a.createElement("h3",null,"Lis\xe4\xe4 vinkki"),r.a.createElement("form",{onSubmit:function(a){return t.addTip(a,{title:e.value,url:n.value})}},r.a.createElement("div",null,r.a.createElement("label",null,"Otsikko"),r.a.createElement("input",Object.assign({"data-cy":"tip-title",id:"tip_title"},a(e)))),r.a.createElement("div",null,r.a.createElement("label",null,"Linkki"),r.a.createElement("input",Object.assign({"data-cy":"tip-url",id:"tip_url"},a(n)))),r.a.createElement("button",{className:"button button-primary button-submit","data-cy":"add-tip",type:"submit"},"Lis\xe4\xe4")))})),T=Object(u.b)((function(t){return{tips:t.tips}}))((function(t){if(t.tips.processing)return r.a.createElement("div",null,"Lataillaan...");if(0===t.tips.tipdata.length)return null;var e=t.tips.tipdata;return r.a.createElement("div",null,r.a.createElement("h2",null,"Lukuvinkit"),e.map((function(t){return r.a.createElement("div",{"data-cy":"tip-item",key:t.id,className:"tip-list-item"},r.a.createElement("div",{className:"tip-content"},t.title," ",t.url))})))})),I=Object(u.b)((function(t){return{tips:t.tips}}),{initTips:function(){return function(){var t=Object(b.a)(f.a.mark((function t(e){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.getAll();case 2:n=t.sent,e({type:"INIT_TIPS",data:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(t){return Object(a.useEffect)((function(){t.tips.processing&&t.initTips()})),r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement("h1",{className:"heading heading__h1"},"Lukuvinkkikirjasto"),r.a.createElement("div",{className:"content-container"},r.a.createElement(l.a,{exact:!0,path:"/add-tip",render:function(){return r.a.createElement(w,null)}}),r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(T,null)}}))))})),x=n(11),N=n(38),_=Object(x.c)({tips:k}),A=Object(x.d)(_,Object(x.a)(N.a)),S=function(){c.a.render(r.a.createElement(u.a,{store:A},r.a.createElement(I,null)),document.getElementById("app"))};S(),A.subscribe(S)}},[[42,1,2]]]);
//# sourceMappingURL=main.8fb6790e.chunk.js.map